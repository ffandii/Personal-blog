!function(a){var b=a.Math.floor,c=a.Number,d=a.isNaN,e=a.document,f=a.parseInt,g=String.fromCharCode;a.QRcode=function(){var a={text:"",level:0,size:278,foreColor:"#000000",backColor:"#FFFFFF"},h=function(){this.version=0,this.options={},this.dataStream=[],this.finalStream=[],this.filmArray=[],this.canvas};return h.prototype={constructor:h,utf16To8:function(a){var b,c,d,e;for(b="",d=a.length,c=0;d>c;c++)e=a.charCodeAt(c),e>=1&&127>=e?b+=a.charAt(c):e>2047?(b+=g(224|15&e>>12),b+=g(128|63&e>>6),b+=g(128|63&e>>0)):(b+=g(192|31&e>>6),b+=g(128|63&e>>0));return b},optSet:function(a,e,f){var h,i,j,k,g=/^([#])+([a-zA-Z0-9]{6})+$/g;for(h in a)if(i=f[h],j=typeof i,"undefined"!=j&&"function"!=j&&"object"!=j)switch(h){case"text":e["text"]=i.toString();break;case"level":i=i.toString().toLowerCase(),e["level"]="l"==i?0:"m"==i?1:"q"==i?2:3;break;case"size":k=b(c(i)),e["size"]=0==d(c(i))?177>k?177:k>885?885:k:a["size"];break;case"foreColor":e["foreColor"]=1==g.test(i)?i:a["foreColor"];break;case"backColor":g.lastIndex=0,e["backColor"]=1==g.test(i)?i:a["backColor"]}else e[h]=a[h];e["text"]=this.utf16To8(e["text"])},createData:function(){var h,i,j,k,l,m,a=this.dataStream,b=this.options["text"],c=this.options["level"],d=[[152,128,104,72],[272,224,176,128],[440,352,272,208],[640,512,384,288],[864,688,496,368],[1088,864,608,480],[1248,992,704,528],[1552,1232,880,688],[1856,1456,1056,800],[2192,1728,1232,976],[2592,2032,1440,1120],[2960,2320,1648,1264],[3424,2672,1952,1440],[3688,2920,2088,1576],[4184,3320,2360,1784],[4712,3624,2600,2024],[5176,4056,2936,2264],[5768,4504,3176,2504],[6360,5016,3560,2728],[6888,5352,3880,3080],[7456,5712,4096,3248],[8048,6256,4544,3536],[8752,6880,4912,3712],[9392,7312,5312,4112],[10208,8e3,5744,4304],[10960,8496,6032,4768],[11744,9024,6464,5024],[12248,9544,6968,5288],[13048,10136,7288,5608],[13880,10984,7880,5960],[14744,11640,8264,6344],[15640,12328,8920,6760],[16568,13048,9368,7208],[17528,13800,9848,7688],[18448,14496,10288,7888],[19472,15312,10832,8432],[20528,15936,11408,8768],[21616,16816,12016,9136],[22496,17728,12656,9776],[23648,18672,13328,10208]],e=b.length,f=12+(e<<3),g=f+8;if(g>d[39][c])throw new Error("Input text is too long!");for(h=0;40>h;h++)if(!(d[h][c]<=(8>=h?f:g))){k=h,j=k>8?16:8;break}for(h=0;e>h;h++)for(l=b.charCodeAt(h),m=128,i=0;8>i;i++)a.push(!!(m&l)),m>>=1;for(h=0;j>h;h++)a.unshift(e%2),e>>=1;for(a.unshift(0),a.unshift(0),a.unshift(1),a.unshift(0),a.push(0),a.push(0),a.push(0),a.push(0),h=0,i=d[k][c]-a.length>>3;i>h;h++)0==h%2?(a.push(1),a.push(1),a.push(1),a.push(0),a.push(1),a.push(1),a.push(0),a.push(0)):(a.push(0),a.push(0),a.push(0),a.push(1),a.push(0),a.push(0),a.push(0),a.push(1));this.version=k},createFinal:function(){var l,n,o,p,q,t,u,v,w,x,y,C,D,a=this.dataStream,b=this.finalStream,c=this.version,d=this.options["level"],e=[0,7,7,7,7,7,0,0,0,0,0,0,0,3,3,3,3,3,3,3,4,4,4,4,4,4,4,3,3,3,3,3,3,3,0,0,0,0,0,0],f=[[[1,26,19],[1,44,34],[1,70,55],[1,100,80],[1,134,108],[2,86,68],[2,98,78],[2,121,97],[2,146,116],[2,86,68,2],[4,101,81],[2,116,92,2],[4,133,107],[3,145,115,1],[5,109,87,1],[5,122,98,1],[1,135,107,5],[5,150,120,1],[3,141,113,4],[3,135,107,5],[4,144,116,4],[2,139,111,7],[4,151,121,5],[6,147,117,4],[8,132,106,4],[10,142,114,2],[8,152,122,4],[3,147,117,10],[7,146,116,7],[5,145,115,10],[13,145,115,3],[17,145,115],[17,145,115,1],[13,145,115,6],[12,151,121,7],[6,151,121,14],[17,152,122,4],[4,152,122,18],[20,147,117,4],[19,148,118,6]],[[1,26,16],[1,44,28],[1,70,44],[2,50,32],[2,67,43],[4,43,27],[4,49,31],[2,60,38,2],[3,58,36,2],[4,69,43,1],[1,80,50,4],[6,58,36,2],[8,59,37,1],[4,64,40,5],[5,65,41,5],[7,73,45,3],[10,74,46,1],[9,69,43,4],[3,70,44,11],[3,67,41,13],[17,68,42],[17,74,46],[4,75,47,14],[6,73,45,14],[8,75,47,13],[19,74,46,4],[22,73,45,3],[3,73,45,23],[21,73,45,7],[19,75,47,10],[2,74,46,29],[10,74,46,23],[14,74,46,21],[14,74,46,23],[12,75,47,26],[6,75,47,34],[29,74,46,14],[13,74,46,32],[40,75,47,7],[18,75,47,31]],[[1,26,13],[1,44,22],[2,35,17],[2,50,24],[2,33,15,2],[4,43,19],[2,32,14,4],[4,40,18,2],[4,36,16,4],[6,43,19,2],[4,50,22,4],[4,46,20,6],[8,44,20,4],[11,36,16,5],[5,54,24,7],[15,43,19,2],[1,50,22,15],[17,50,22,1],[17,47,21,4],[15,54,24,5],[17,50,22,6],[7,54,24,16],[11,54,24,14],[11,54,24,16],[7,54,24,22],[28,50,22,6],[8,53,23,26],[4,54,24,31],[1,53,23,37],[15,54,24,25],[42,54,24,1],[10,54,24,35],[29,54,24,19],[44,54,24,7],[39,54,24,14],[46,54,24,10],[49,54,24,10],[48,54,24,14],[43,54,24,22],[34,54,24,34]],[[1,26,9],[1,44,16],[2,35,13],[4,25,9],[2,33,11,2],[4,43,15],[4,39,13,1],[4,40,14,2],[4,36,12,4],[6,43,15,2],[3,36,12,8],[7,42,14,4],[12,33,11,4],[11,36,12,5],[11,36,12,7],[3,45,15,13],[2,42,14,17],[2,42,14,19],[9,39,13,16],[15,43,15,10],[19,46,16,6],[34,37,13],[16,45,15,14],[30,46,16,2],[22,45,15,13],[33,46,16,4],[12,45,15,28],[11,45,15,31],[19,45,15,26],[23,45,15,25],[23,45,15,28],[19,45,15,35],[11,45,15,46],[59,46,16,1],[22,45,15,41],[2,45,15,64],[24,45,15,46],[42,45,15,32],[10,45,15,67],[20,45,15,61]]],g=[[7,21,102,238,149,146,229,87],[10,45,32,94,64,70,118,61,46,67,251],[13,78,140,206,218,130,104,106,100,86,100,176,152,74],[15,105,99,5,124,140,237,58,58,51,37,202,91,61,183,8],[16,120,225,194,182,169,147,191,91,3,76,161,102,109,107,104,120],[17,136,163,243,39,150,99,24,147,214,206,123,239,43,78,206,139,43],[18,153,96,98,5,179,252,148,152,187,79,170,118,97,184,94,158,234,215],[20,190,188,212,212,164,156,239,83,225,221,180,202,187,26,163,61,50,79,60,17],[22,231,165,105,160,134,219,80,98,172,8,74,200,53,221,109,14,230,93,242,247,171,210],[24,21,227,96,87,232,117,0,111,218,228,226,192,152,169,180,159,126,251,117,211,48,135,121,229],[26,70,218,145,153,227,48,102,13,142,245,21,161,53,165,28,111,201,145,17,118,182,103,2,158,125,173],[28,123,9,37,242,119,212,195,42,87,245,43,21,201,232,27,205,147,195,190,110,180,108,234,224,104,200,223,168],[30,180,192,40,238,216,251,37,156,130,224,193,226,173,42,125,222,96,239,86,110,48,50,182,179,31,216,152,145,173,41]],h=[1,2,4,8,16,32,64,128,29,58,116,232,205,135,19,38,76,152,45,90,180,117,234,201,143,3,6,12,24,48,96,192,157,39,78,156,37,74,148,53,106,212,181,119,238,193,159,35,70,140,5,10,20,40,80,160,93,186,105,210,185,111,222,161,95,190,97,194,153,47,94,188,101,202,137,15,30,60,120,240,253,231,211,187,107,214,177,127,254,225,223,163,91,182,113,226,217,175,67,134,17,34,68,136,13,26,52,104,208,189,103,206,129,31,62,124,248,237,199,147,59,118,236,197,151,51,102,204,133,23,46,92,184,109,218,169,79,158,33,66,132,21,42,84,168,77,154,41,82,164,85,170,73,146,57,114,228,213,183,115,230,209,191,99,198,145,63,126,252,229,215,179,123,246,241,255,227,219,171,75,150,49,98,196,149,55,110,220,165,87,174,65,130,25,50,100,200,141,7,14,28,56,112,224,221,167,83,166,81,162,89,178,121,242,249,239,195,155,43,86,172,69,138,9,18,36,72,144,61,122,244,245,247,243,251,235,203,139,11,22,44,88,176,125,250,233,207,131,27,54,108,216,173,71,142,1],i=[0,0,1,25,2,50,26,198,3,223,51,238,27,104,199,75,4,100,224,14,52,141,239,129,28,193,105,248,200,8,76,113,5,138,101,47,225,36,15,33,53,147,142,218,240,18,130,69,29,181,194,125,106,39,249,185,201,154,9,120,77,228,114,166,6,191,139,98,102,221,48,253,226,152,37,179,16,145,34,136,54,208,148,206,143,150,219,189,241,210,19,92,131,56,70,64,30,66,182,163,195,72,126,110,107,58,40,84,250,133,186,61,202,94,155,159,10,21,121,43,78,212,229,172,115,243,167,87,7,112,192,247,140,128,99,13,103,74,222,237,49,197,254,24,227,165,153,119,38,184,180,124,17,68,146,217,35,32,137,46,55,63,209,91,149,188,207,205,144,135,151,178,220,252,190,97,242,86,211,171,20,42,93,158,132,60,57,83,71,109,65,162,31,45,67,216,183,123,164,118,196,23,73,236,127,12,111,246,108,161,59,82,41,157,85,170,251,96,134,177,187,204,62,90,203,89,95,176,156,169,160,81,11,245,22,235,122,117,44,215,79,174,213,233,230,231,173,232,116,214,244,234,168,80,88,175],j=[],k=f[d][c],m=0,r=[],s=[],z=[k[2],void 0==k[3]?0:1+k[2]],A=[k[0],void 0==k[3]?0:k[3]],B=k[1]-k[2];for(n=0,p=g.length;p>n;n++)if(g[n][0]==B){l=n;break}for(n=0;2>n&&(q=z[n],0!=q);n++)for(o=0,p=A[n];p>o;o++){for(t=0;B>t;t++)for(r[t]=[],s[t]=[],u=0;8>u;u++)r[t][u]=!1;for(t=0;q>t;t++){for(w=0,u=0;8>u;u++)w<<=1,w=w+r[B-1][u]^a[m],m++;for(x=i[w],u=1;B>u;u++)for(y=h[(x+g[l][u+1])%255],v=7;v>=0;v--)s[u][v]=r[u-1][v]^y%2,y>>=1;for(y=h[(x+g[l][1])%255],v=7;v>=0;v--)s[0][v]=y%2,y>>=1;for(u=0;B>u;u++)for(v=0;8>v;v++)r[u][v]=s[u][v]}for(u=B-1;u>=0;u--)for(v=0;8>v;v++)j.push(r[u][v])}for(C=[],D=[],w=A[0],y=w+A[1],t=0;2>t;t++)for(n=0==t?0:w,p=0==t?w:y;p>n;n++)for(C[n]=[],o=0,q=z[t];q>o;o++)for(u=0;8>u;u++)C[n][(o<<3)+u]=a.shift();for(n=0;y>n;n++)for(D[n]=[],o=0;B>o;o++)for(u=0;8>u;u++)D[n][(o<<3)+u]=j.shift();for(o=0,q=z[0];q>o;o++)for(n=0;y>n;n++)for(u=0;8>u;u++)b.push(C[n][(o<<3)+u]);for(q=z[0]<<3,n=w;y>n;n++)for(u=0;8>u;u++)b.push(C[n][q+u]);for(o=0;B>o;o++)for(n=0;y>n;n++)for(u=0;8>u;u++)b.push(D[n][(o<<3)+u]);for(n=0,p=e[c];p>n;n++)b.push(0)},createFilm:function(a){var h,i,k,m,n,o,p,q,r,b=this.filmArray,c=this.finalStream,d=this.version,e=this.options["level"],f=[],g=21+4*d,j=!1,l=g-7;for(h=0;g>h;h++)for(b[h]=[],f[h]=[],i=0;g>i;i++)b[h][i]=!0,f[h][i]=255;for(h=0;7>h;h++)for(i=0;7>i;i++)(0==h||0==i||6==h||6==i||h>=2&&4>=h&&i>=2&&4>=i)&&(b[h][i]=b[h][l+i]=b[l+h][i]=!1);for(i=6;l>=i;i++)0==j&&(b[i][6]=b[6][i]=!1),j=!j,i>=8&&l-2>=i&&(f[i][6]=f[6][i]=0);for(p=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],h=0,k=p[d].length;k>h;h++)for(i=0;k>i;i++)if(m=p[d][h],n=p[d][i],6!=m&&m!=l||6!=n&&n!=l||m==l&&n==l)for(b[m][n]=!1,o=0;5>o;o++)b[m-2+o][n-2]=b[m-2+o][n+2]=b[m-2][n-2+o]=b[m+2][n-2+o]=!1,f[m-2+o][n-2]=f[m-2+o][n-1]=f[m-2+o][n]=f[m-2+o][n+1]=f[m-2+o][n+2]=0;for(h=0;7>=h;h++){for(i=0;7>=i;i++)f[h][i]=f[g-8+h][i]=f[h][g-8+i]=0;f[8][g-8+h]=f[g-8+h][8]=0}for(h=0;8>=h;h++)f[h][8]=f[8][h]=0;if(d>=6)for(h=0;6>h;h++)for(i=0;3>i;i++)f[g-11+i][h]=f[h][g-11+i]=0;for(h=i=g-1,m=0,o=!1;c.length>0;)-1==h?(h=0,i=8==i?5:i-2,m=1):h==g&&(h=g-1,i-=2,m=0),0!=f[h][i]&&(b[h][i]=0==(h+i)%3?c.shift():!c.shift()),0==m?(h=0==o?h:h-1,i=0==o?i-1:i+1):(h=0==o?h:h+1,i=0==o?i-1:i+1),o=!o;for(q=[[0,1],[0,0],[1,1],[1,0]],m=(q[e][0]<<4)+(q[e][1]<<3)+2+1,n=0,m<<=5,h=0;5>h;h++)n<<=1,m<<=1,0!=(1024&(n^m))&&(n^=311);for(m=21522^(31744&m|1023&n),h=0;6>h;h++)b[h][8]=b[8][g-1-h]=!(m%2),m>>=1;for(b[7][8]=b[8][g-7]=!(m%2),m>>=1,b[8][8]=b[8][g-8]=!(m%2),m>>=1,b[8][7]=b[g-7][8]=!(m%2),m>>=1,b[g-8][8]=0,h=0;6>h;h++)b[8][5-h]=b[g-6+h][8]=!(m%2),m>>=1;if(d>=6)for(r=[31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017],m=r[d-6],h=0;18>h;h++)b[g-11+h%3][a(h/3)]=b[a(h/3)][g-11+h%3]=!(m%2),m>>=1},initCanvas:function(a){var d,f,b=this.options["size"],c=e.body.querySelector(a);if(null==c)throw new Error("Element not found!");c.innerHTML="<canvas width='"+b+"' height='"+b+"'></canvas>",this.canvas=c.querySelector("canvas"),d=this.canvas.getContext("2d"),f=new Image,f.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAIAAACQd1PeAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAMSURBVBhXY/j//z8ABf4C/qc1gYQAAAAASUVORK5CYII=",d.drawImage(f,0,0,b,b)},displayFilm:function(a){var p,s,b=this.options,c=this.canvas.getContext("2d"),d=this.filmArray,e=d.length,g=b["size"],h=f(b["foreColor"].slice(1,3),16),i=f(b["foreColor"].slice(3,5),16),j=f(b["foreColor"].slice(5,7),16),k=f(b["backColor"].slice(1,3),16),l=f(b["backColor"].slice(3,5),16),m=f(b["backColor"].slice(5,7),16),n=c.getImageData(0,0,g,g),o=n.data,q=-1,r=0,t=e/g;for(p=0,s=o.length;s>p;p+=4)r=(p>>2)%g,0==r%g&&q++,0==d[a(q*t)][a(r*t)]?(o[p]=h,o[p+1]=i,o[p+2]=j):(o[p]=k,o[p+1]=l,o[p+2]=m);n.data=o,c.putImageData(n,0,0),this.filmArray=[]},generate:function(c,d){return this.optSet(a,this.options,c),this.canvas||this.initCanvas(d),this.createData(),this.createFinal(),this.createFilm(b),this.displayFilm(b),this},embedLogo:function(a){var f,b=this.options["size"],c=this.canvas.getContext("2d"),d=b>>2,e=b-d>>1;if("undefined"!=typeof this.canvas&&"string"==typeof a){if(f=new Image,f.src=a,f.complete)return c.drawImage(f,e,e,d,d),void 0;f.onload=function(){c.drawImage(f,e,e,d,d)}}return this}},new h}()}(window);
